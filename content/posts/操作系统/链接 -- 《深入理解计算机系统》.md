---
title: "链接 -- 《深入理解计算机系统》"
description: "链接 -- 《深入理解计算机系统》"
date: 2023-05-03T14:22:26+08:00
draft: false
tags: ["操作系统","c"]
categories: ["操作系统","c"]
featuredImagePreview: ""
---

## 导言
> 最近正在学习 c 语言，并且在看《深入理解计算机系统》这本书。希望能够记录下自己学习和思考的一些过程。

### 一、编译过程
c 语言从源代码文件(.c文件)编译成可执行文件（.out文件）一共需要经过四个阶段。
1. 预处理器：将 `.c` 文件中的以 `#` 开头的代码替换成对应的文本。例如，头文件中的 ```#include <stdio>``` 换成系统头文件 stdio.h 中的内容，最终生成 `.i` 文件。
2. 编译器：此时 `.i` 文件中依然是 txt 文本。通过编译器将 `.i` 文件中的内容翻译成汇编语言，生成 `.s` 文件。
3. 汇编器：将 `.s` 文件中的汇编语言翻译成机器语言，生成 `.o` 文件，此时 `.o` 文件已经是二进制文件。
4. 链接器：找到文件中需要链接的地方，比如找到编写了 `printf()` 这种外部函数的文件，从文件中找到对应的代码合并到一个文件中，最终得到一个可执行文件。

### 二、链接
> 链接是将各种代码和数据片段收集并组合成为一个单一文件的过程，这个文件可被加载到内存并执行。

一个 `.o` 文件就是一个 `可重定位目标模块`，后续没有说明皆简称为 模块。 

符号表：程序在汇编过程中会对各个模块生成符号表，他包含了这个模块中定义和引用符号的信息。

符号解析：在链接器链接的过程中，链接器会将模块中的引用与符号表中的一个确定的符号定义相关联起来。